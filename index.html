<!DOCTYPE html>
<html>
  <head>
    <title>Placement Question</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      .container {
        margin-top: 50px;
      }

      .developers {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        font-weight: bold;
      }

      .developer-column {
        margin: 0 20px;
      }

      .list-group-item {
        padding: 1rem 1rem;
      }

      .search-form {
        margin-bottom: 20px;
      }

      @media (max-width: 576px) {
        .search-form {
          display: flex;
          justify-content: center;
        }

        .search-form .form-group {
          margin-bottom: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center">KSRCE - IT Department Placement Questions</h1>
      <p id="liveDate" class="text-center"></p>

      <div class="search-form">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            id="searchInput"
            placeholder="Search by question"
          />
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Questions:</h5>
          <ul id="questionList" class="list-group"></ul>
        </div>
      </div>

      <div class="footer">
        <h6>Developed By IT Student(2021 - 2025)</h6>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1/firebase.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyA4bL1tslUI_gVB4fLhclsgKHFn_GzAPdA",
        authDomain: "it-placement-2002.firebaseapp.com",
        databaseURL: "https://it-placement-2002-default-rtdb.firebaseio.com",
        projectId: "it-placement-2002",
        storageBucket: "it-placement-2002.appspot.com",
        messagingSenderId: "991820287422",
        appId: "1:991820287422:web:79af1bd21521a62df93def",
        measurementId: "G-Y6N5E1NQCY"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      const itDB = firebase.database().ref("it-placement-2002");

      const questionListElement = document.getElementById("questionList");
      const searchInputElement = document.getElementById("searchInput");

      // Fetch questions from Firebase and display them
      itDB.on("value", (snapshot) => {
        questionListElement.innerHTML = ""; // Clear existing questions

        const questionsData = snapshot.val(); // Get the data from the snapshot

        if (questionsData) {
          let count = 0;
          Object.entries(questionsData).forEach(([id, data]) => {
            count++;
            const listItem = document.createElement("li");
            listItem.className = "list-group-item";
            listItem.innerHTML = `
            <div class="row">
              <div class="col-6 text-left">
                <b class="text-success">Question Number : ${count}</b>
              </div>
              <div class="col-6 text-right">
                <p class="text-primary"> ${data.timestamp}</p>
              </div>
            </div>
            <br>${data.question}`;

            questionListElement.appendChild(listItem);
          });

          // Add event listener to search input
          searchInputElement.addEventListener("input", () => {
            const searchTerm = searchInputElement.value.toLowerCase();
            const listItems = questionListElement.getElementsByClassName(
              "list-group-item"
            );

            for (let i = 0; i < listItems.length; i++) {
              const listItem = listItems[i];
              const questionText = listItem.innerText.toLowerCase();

              if (questionText.includes(searchTerm)) {
                listItem.style.display = "block";
              } else {
                listItem.style.display = "none";
              }
            }
          });
        }
      });

      // Display the live date at the top of the page
      const liveDateElement = document.getElementById("liveDate");
      setInterval(() => {
        const currentDate = new Date();
        const options = {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric"
        };
        liveDateElement.textContent = currentDate.toLocaleDateString(
          undefined,
          options
        );
      }, 1000); // Update every second
    </script>
  </body>
</html>
